# hl7_fhir_r4_core

**Generated FHIR Types for hl7.fhir.r4.core**

This crate contains automatically generated Rust types for FHIR (Fast Healthcare Interoperability Resources) based on the `hl7.fhir.r4.core` package.

## Important Notice

**This crate was automatically generated using the RH codegen CLI tool.**

- **Generator command**:
```bash
rh codegen hl7.fhir.r4.core 4.0.1 --output /Users/bkaney/projects/rh/crates/rh-fhir-r4 --force
```

- **Generation timestamp**: 2025-10-22 15:17:43.964070 -04:00

## Package Information

* **Package Name** hl7.fhir.r4.core
* **Package Author** HL7 Inc
* **Version** 4.0.1
* **Canonical URL** `http://hl7.org/fhir`

**Statistics: 0 structs, 0 enums, 0 total types**

## Description

Definitions (API, structures and terminologies) for the R4 version of the FHIR standard

## Features

- **Complete FHIR type definitions** - All resources, datatypes, and primitives
- **Serde serialization** - Built-in JSON serialization/deserialization support
- **Type metadata** - Compile-time metadata for field types and path resolution
- **Idiomatic Rust** - Clean, organized module structure with proper naming conventions
- **Zero-cost abstractions** - PHF (perfect hash function) maps for O(1) metadata lookups

## Usage

Add this crate to your `Cargo.toml`:

```toml
[dependencies]
hl7_fhir_r4_core = "0.1.0"
```

### Deserializing FHIR Resources

```rust
use hl7_fhir_r4_core::resources::patient::Patient;
use serde_json;

let json_data = r#"{\"resourceType\": \"Patient\", \"id\": \"example\"}"#;
let patient: Patient = serde_json::from_str(json_data)?;

println!("Patient ID: {}", patient.id.unwrap_or_default());
```

### Creating Resources Programmatically

```rust
use hl7_fhir_r4_core::resources::patient::Patient;
use hl7_fhir_r4_core::datatypes::human_name::HumanName;
use hl7_fhir_r4_core::bindings::administrative_gender::AdministrativeGender;
use hl7_fhir_r4_core::primitives::date::DateType;

let patient = Patient {
    id: Some("patient-123".to_string()),
    active: Some(true),
    name: vec![HumanName {
        family: Some("Doe".to_string()),
        given: vec!["John".to_string()],
        ..Default::default()
    }],
    gender: Some(AdministrativeGender::Male),
    birth_date: Some("1990-01-15".to_string()),
    ..Default::default()
};
```

### Using Type Metadata

This crate includes compile-time metadata for all FHIR types, enabling runtime type introspection and path resolution:

```rust
use hl7_fhir_r4_core::metadata::{resolve_path, get_field_info, FhirFieldType, FhirPrimitiveType};

// Resolve nested paths to their FHIR types
if let Some(field_type) = resolve_path("Patient.birthDate") {
    match field_type {
        FhirFieldType::Primitive(FhirPrimitiveType::Date) => {
            println!("birthDate is a FHIR date type");
        }
        _ => {}
    }
}

// Resolve complex nested paths
if let Some(field_type) = resolve_path("Patient.name.given") {
    match field_type {
        FhirFieldType::Primitive(FhirPrimitiveType::String) => {
            println!("name.given is a string array");
        }
        _ => {}
    }
}

// Get field information directly
if let Some(field_info) = get_field_info("Patient", "active") {
    println!("Min cardinality: {}", field_info.min);
    println!("Max cardinality: {:?}", field_info.max);
    println!("Is choice type: {}", field_info.is_choice_type);
}
```

The metadata system enables:
- **Path resolution** - Navigate nested paths like `Patient.name.given`
- **Type introspection** - Determine field types at runtime
- **Cardinality information** - Min/max occurrence constraints
- **Choice type detection** - Identify polymorphic fields
- **Zero runtime cost** - All lookups use compile-time perfect hash maps

## Structure

This crate organizes FHIR types into logical modules:

- **resources/** - All FHIR resources (Patient, Observation, etc.)
- **datatypes/** - Complex and primitive datatypes (HumanName, Address, etc.)
- **bindings/** - ValueSet enumerations (AdministrativeGender, etc.)
- **primitives/** - Base primitive types (DateType, DateTimeType, etc.)
- **metadata.rs** - Type metadata and path resolution functions

## Regenerating This Crate

To regenerate this crate with updated FHIR definitions:

```bash
rh codegen hl7.fhir.r4.core 4.0.1 --output /Users/bkaney/projects/rh/crates/rh-fhir-r4 --force
```

## License

This generated crate is provided under MIT OR Apache-2.0 license.

## Related Links

- [FHIR Specification](https://hl7.org/fhir/)
- [FHIR Package Registry](https://packages.fhir.org/)
- [RH Project](https://github.com/reasonhealth/rh)

---

*Generated by RH codegen tool at 2025-10-22 15:17:43.964329 -04:00*
